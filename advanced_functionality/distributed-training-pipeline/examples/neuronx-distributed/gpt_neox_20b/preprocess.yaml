resources:
  instance_count: 1
  instance_type: ml.m5.12xlarge 
  volume_size: 200
git:
  repo_url: "https://github.com/aws-neuron/neuronx-distributed.git"
  commit: 083d3ea26f58d6b91d6e0f0deb2c0670fdb7bbb0
  branch: main
pre_script: 
  - pip3 install --upgrade pip
  - pip3 install -r $GIT_CLONE_DIR/examples/training/tp_dp_gpt_neox_hf_pretrain/common/requirements.txt 
  - mkdir -p $DATA_ROOT
train:
  env:
    - name: HOME
      value: $SM_OUTPUT_DATA_DIR
    - name: DATA_ROOT
      value: $SM_CHANNEL_FSX/home/$RELEASE_NAME
  command:
    -  HOME=$DATA_ROOT python3 
  args:
    - $GIT_CLONE_DIR/examples/training/tp_dp_gpt_neox_hf_pretrain/common/get_dataset.py 
